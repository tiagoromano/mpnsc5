(window.fixedTimeZone===void 0||null===window.fixedTimeZone)&&(window.fixedTimeZone=!0),(window.timeZone===void 0||null===window.timeZone)&&(window.timeZone="UTC"),(window.timeZoneOffset===void 0||null===window.timeZoneOffset)&&(window.timeZoneOffset=0),window.systemTimeZoneOffset=window.timeZoneOffset,window.fixedTimeZone||(window.timeZoneOffset=moment().utcOffset()),function(){'use strict';var _StringfromCharCode=String.fromCharCode;function getCalendar(e){let a=Date.now(),t=1e4,n=(o,r)=>{let c=$("#"+e+" cron-calendar").data("kendoCalendar");c?o(c):t&&Date.now()-a>=t?o():setTimeout(()=>n(o,r),200)};return new Promise(n)}function showErrorNotification(e){const a=this.cronapi.$translate.instant(e);this.cronapi.$scope.Notification.error(a)}function getChat(e){let a=Date.now(),t=1e4,n=(o,r)=>{let c=$("#"+e+" .k-chat").data("kendoChat");c?o(c):t&&Date.now()-a>=t?o():setTimeout(()=>n(o,r),200)};return new Promise(n)}this.$evt=function(e){var a=this;a.$eval||(a=angular.element(event.target).scope()),a.$eval(e)}.bind(this),this.cronapi={},this.cronapi.toDate=function(e){return new Date(e)};var getDatasource=function(e){return"string"==typeof e?window[e]:e};this.cronapi.doEval=function(e){return e},this.cronapi.evalInContext=async function(js){var result=eval("this.cronapi.doEval("+js+")");if(result){if(result.commands)for(var func,i=0;i<result.commands.length;i++)func=eval(result.commands[i].function),await func.apply(this,result.commands[i].params);return result.value}};let clientMap={};this.cronapi.client=function(pack){let attr=!1;return{attr:function(){return attr=!0,this},run:function(){for(var key=pack,i=0;i<arguments.length;i++)key+=arguments[i]+"";var bk;try{bk=eval("blockly."+pack)}catch(a){}if(bk||(bk=eval(pack)),attr){let e=bk.apply(this,arguments);return void 0!==e&&null!==e&&e.then&&"function"==typeof e.then?(e.then(e=>{clientMap[key]!==e&&this.safeApply(()=>{clientMap[key]=e})}).catch(e=>{clientMap[key]!==e&&this.safeApply(()=>{clientMap[key]=e})}),clientMap[key]):e}else{let e="AsyncFunction"===bk.constructor.name;return e?bk.apply(this,arguments).catch(e=>this.cronapi.$scope.Notification.error(e)):bk.apply(this,arguments)}}.bind(this)}};var serverMap={};this.cronapi.server=function(e){var a=!1,t=!1,n=!0;return{attr:function(){return a=!0,this},toPromise:function(){return t=!0,this},notAsync:function(){return n=!1,this},run:function(){for(var o=e,r=0;r<arguments.length;r++)o+=arguments[r]+"";if(a){if(serverMap.hasOwnProperty(o))return"$$loading"==serverMap[o]?"":serverMap[o];serverMap[o]="$$loading"}var c=e.split("."),s=c[c.length-1];c.pop();var l,p,d=c.join("."),m=new Promise((e,a)=>{l=e,p=a}),g=function(e){this.safeApply(function(){a&&(serverMap[o]=e),l(e)})}.bind(this),u=function(e){this.safeApply(function(){a&&(serverMap[o]=e),p(e)}),e&&this.cronapi.$scope.Notification.error(e)}.bind(this),h=[d+":"+s];if(n){h.push(g),h.push(u);for(var r=0;r<arguments.length;r++)h.push(arguments[r]);if(this.cronapi.util.makeCallServerBlocklyAsync.apply(this,h),t)return m}else{for(var r=0;r<arguments.length;r++)h.push(arguments[r]);let e=this.cronapi.util.callServerBlockly.apply(this,h);return a&&(serverMap[o]=e),e}}.bind(this)}},this.cronapi.callFunction=function(name){return{call:function(){var ref;try{ref=eval(name)}catch(a){}return ref?ref.apply(this,arguments):void 0}.bind(this)}},this.cronapi.conversion={},this.cronapi.conversion.asciiToBinary=function(e){var a="";if(0<e.length)for(var t,n=0;n<e.length;n++){t=e.charCodeAt(n);for(var o=7;0<=o;o--)a+=1&t>>o}return a},this.cronapi.conversion.toBoolean=function(e){return this.cronapi.internal.parseBoolean(e)},this.cronapi.conversion.toBytes=function(e){return e?e.toString():""},this.cronapi.conversion.chrToAscii=function(e){return e?e.charCodeAt(0):null},this.cronapi.conversion.stringToJs=function(e){return this.cronapi.internal.stringToJs(e)},this.cronapi.conversion.stringToDate=function(value){var pattern=/^\s*(\d+)[\/\.-](\d+)[\/\.-](\d+)(\s(\d+):(\d+):(\d+))?\s*$/;if(value){if(value instanceof Date)return value;if(pattern.test(value)){var splited=pattern.exec(value),userLang=(navigator.language||navigator.userLanguage).split("-")[0];if("pt"==userLang||"en"==userLang){var functionToCall=eval("cronapi.internal."+userLang+"Date");return functionToCall(splited)}return new Date(value)}return new Date(value)}return null},this.cronapi.conversion.intToHex=function(e){return(+e).toString(16).toUpperCase()},this.cronapi.conversion.toLong=function(e){return parseInt(e)},this.cronapi.conversion.toString=function(e){if(e){var a=new String(e);return a.toString()}return""},this.cronapi.util={},this.cronapi.util.getApplicationName=function(){return $("#projectName").length?$("#projectName").val():$("h1:first").length&&$("h1:first").text().trim().length?$("h1:first").text().trim():""},this.cronapi.util.createPromise=function(){var e,a,t=new Promise((t,n)=>{e=t,a=n});return t.__functionToResolve=e,t.__functionToReject=a,t},this.cronapi.util.handleValueToPromise=function(e,a,t){"resolve"===e?a.__functionToResolve(t):a.__functionToReject(t)},this.cronapi.util.sleep=async function(e){var a=new Promise(a=>{setInterval(()=>{a(e)},e)});return a},this.cronapi.util.callServerBlocklyAsync=function(e,a,t,n){const o=()=>{const e=new WeakSet;return(a,t)=>{if("object"==typeof t&&null!==t){if(e.has(t))return;e.add(t)}return t}};var r="api/cronapi/call/body/#classNameWithMethod#/".replace("#classNameWithMethod#",e),c=this.cronapi.$scope.http,s=[];$(arguments).each(function(){s.push(this)});var l="";window.uToken&&(l=window.uToken);var p={fields:a,inputs:s.slice(4)},d=this.cronapi.internal.getAddressWithHostApp(r);let m;try{m=JSON.stringify(p)}catch(a){m=JSON.stringify(p,o())}$.ajax({type:"POST",url:d,dataType:"html",data:m,headers:{"Content-Type":"application/json","X-AUTH-TOKEN":l,toJS:!0,timezone:moment().utcOffset()},success:t,error:n})},this.cronapi.util.getScreenFields=function(){var fields={};for(var key in this.cronapi.$scope)this.cronapi.$scope[key]&&this.cronapi.$scope[key].constructor&&"DataSet"==this.cronapi.$scope[key].constructor.name&&(fields[key]={},fields[key].active=this.cronapi.$scope[key].active);var scope=this.cronapi.$scope,recursiveLookup=function(scope){var fieldValue;try{fieldValue=eval(scope.vars)}catch(a){}if(fieldValue&&0!==Object.keys(fieldValue).length){var keys=Object.keys(fieldValue);keys.forEach(function(e){void 0!==fieldValue[e]&&null!==fieldValue[e]&&(!fields.vars&&(fields.vars={}),fields.vars[e]=fieldValue[e])})}else if(scope&&scope.$parent)return recursiveLookup(scope.$parent)};for(var key in recursiveLookup(scope),this.cronapi.$scope.params)this.cronapi.$scope.params[key]&&(fields.params||(fields.params={}),fields.params[key]=this.cronapi.$scope.params[key]);return fields},this.cronapi.util.makeCallServerBlocklyAsync=function(blocklyWithFunction,callbackSuccess,callbackError){var fields=this.cronapi.util.getScreenFields(),paramsApply=[];paramsApply.push(blocklyWithFunction),paramsApply.push(fields),paramsApply.push(function(data){this.cronapi.evalInContext(data).then(result=>{"string"==typeof callbackSuccess?eval(callbackSuccess)(result):callbackSuccess&&callbackSuccess(result)})}.bind(this)),paramsApply.push(function(data,status,errorThrown){var message=this.cronapi.internal.getErrorMessage(data.responseText,errorThrown);"string"==typeof callbackError?eval(callbackError)(message):callbackError?callbackError(message):this.cronapi.$scope.Notification.error(message)}.bind(this)),$(arguments).each(function(e){3<=e&&paramsApply.push(this)}),this.cronapi.util.callServerBlocklyAsync.apply(this,paramsApply)},this.cronapi.util.callServerBlocklyNoReturn=async function(){return this.cronapi.util.callServerBlockly.apply(this,arguments)},this.cronapi.util.throwException=function(e){throw e},this.cronapi.util.createException=function(e){return e},this.cronapi.util.language=function(){var e=(window.navigator.userLanguage||window.navigator.language||"pt_br").replace("-","_");return e},this.cronapi.util.share=function(e,a,t){return navigator.share({title:e,text:a,url:t}).then(()=>console.log("Successful share")).catch(e=>console.log("Error sharing:",e)),value},this.cronapi.util.callServerBlockly=async function(e){let a=[e,null,null],t=1;for(t;t<arguments.length;t++)a.push(arguments[t]);return new Promise(((e,t)=>{a[1]=(a=>{e(a)}).bind(this),a[2]=(e=>{t(e)}).bind(this),this.cronapi.util.makeCallServerBlocklyAsync.apply(this,a)}).bind(this))},this.cronapi.util.callServerBlocklyAsynchronous=function(e,a,t){if(""!=e&&"function"==typeof a){var t=[e,a,a],n=2;for(n;n<arguments.length;n++)t.push(arguments[n]);this.cronapi.util.makeCallServerBlocklyAsync.apply(this,t)}},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.downloadFile=function(e){var a=this.cronapi.internal.getAddressWithHostApp(e);this.cronapi.screen.openUrl(a,"_blank",0,0)},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.executeJavascriptReturn=function(value){return eval(value)},this.cronapi.util.openReport=function(e){this.cronapi.$scope.getReport(e)},this.cronapi.util.handleCallback=function(e){if(e){let a="AsyncFunction"===e.constructor.name;return a?function(){(async()=>await e.apply(this,arguments))()}.bind(this):e.bind(this)}},this.cronapi.util.getURLFromOthers=function(e,a,t,n,o,r,c){if(n&&"application/x-www-form-urlencoded"===a){for(var s in n)if(n[s]instanceof Array){var l=n[s].toString();n[s]=`[${l}]`}}else n&&"application/json"===a&&(n=JSON.stringify(n));var p=Object.create(o);p["Content-Type"]=a,$.ajax({method:e,url:t,data:n,headers:p}).success(this.cronapi.util.handleCallback(r).bind(this)).error(this.cronapi.util.handleCallback(c.bind(this)))},this.cronapi.util.getUserToken=function(){return JSON.parse(window.localStorage.getItem("_u")).token},this.cronapi.util.setSessionStorage=function(e,a){window.sessionStorage.setItem(e,a)},this.cronapi.util.getSessionStorage=function(e){return window.sessionStorage.getItem(e)},this.cronapi.util.setLocalStorage=function(e,a){window.localStorage.setItem(e,a)},this.cronapi.util.getLocalStorage=function(e){return window.localStorage.getItem(e)},this.cronapi.util.executeAsynchronous=function(e){setTimeout(e,0)},this.cronapi.util.scheduleExecution=function(e,a,t,n,o){o=o||!0,o="true"===o||!0===o;var r=1;"seconds"===n?r=1e3:"minutes"===n?r=6e4:"hours"==n&&(r=36e5),a*=r,t*=r;var c=-1,s=setTimeout(function(){e(),c=setInterval(e,t)}.bind(this),a);o&&this.$on("$destroy",function(){try{clearTimeout(s)}catch(a){}try{clearInterval(c)}catch(a){}})},this.cronapi.util.openReport=function(e,a,t){this.cronapi.$scope.getReport(e,a,t)},this.cronapi.util.getCEP=function(e,a){if(this.cronapi.logic.isNullOrEmpty(e))throw new Error("Informe o CEP");if(e=e.replace(/\.|\-/g,"").split(" ").join(""),8>e.length)throw new Error("CEP inv\xE1lido");let t="https://viacep.com.br/ws/"+e+"/json/?callback=?";$.getJSON(t,this.cronapi.util.handleCallback(a.bind(this)))},this.cronapi.screen={},this.cronapi.screen.isInsertingMode=function(e){return e.inserting},this.cronapi.screen.isEditingMode=function(e){return e.editing},this.cronapi.screen.changeTitleScreen=function(e){window.document.title=e},this.cronapi.screen.fieldFromScreen=function(e){return e},this.cronapi.screen.changeValueOfField=function(e,a){try{this.__tempValue=a;var t=new Function("this."+e+" = this.__tempValue;");this.safeApply(t.bind(this))}catch(a){}},this.cronapi.screen.getValueOfField=function(field){try{if(field&&0<field.length){if(-1<field.indexOf(".active."))return eval(field);var scope=eval("this"),recursiveLookup=function(scope){var fieldValue;try{fieldValue=eval("scope."+field)}catch(a){}return void 0!==fieldValue||null!==fieldValue?fieldValue:scope&&scope.$parent?recursiveLookup(scope.$parent):""};return recursiveLookup(scope)}return""}catch(a){alert(a)}},this.cronapi.screen.createScopeVariable=function(e,a){this.cronapi.$scope.vars[e]=a},this.cronapi.screen.getScopeVariable=function(e){return this.cronapi.$scope.vars[e]},this.cronapi.screen.notify=function(e,a){(null==a||a==null)&&(a=""),this.cronapi.$scope.Notification({message:a.toString()},e)},this.cronapi.screen.datasourceFromScreen=function(e){return e},this.cronapi.screen.startInsertingMode=function(e){getDatasource(e).$apply(function(){getDatasource(e).startInserting()})},this.cronapi.screen.startEditingMode=function(e){getDatasource(e).$apply(new function(){getDatasource(e).startEditing()})},this.cronapi.screen.previusRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).previous()})},this.cronapi.screen.nextRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).next()})},this.cronapi.screen.firstRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=-1,a.next()})},this.cronapi.screen.lastRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=a.data.length-2,a.next()})},this.cronapi.screen.removeRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).removeSilent()})},this.cronapi.screen.refreshActiveRecord=function(e){getDatasource(e).refreshActive()},this.cronapi.screen.hasNextRecord=function(e){return getDatasource(e).hasNext()},this.cronapi.screen.quantityRecords=function(e){return getDatasource(e).data.length},this.cronapi.screen.post=function(e){return getDatasource(e).postSilent()},this.cronapi.screen.filter=function(e,a){getDatasource(e).isOData()?getDatasource(e).search(a):getDatasource(e).filter("/"+a)},this.cronapi.screen.changeView=function(view,params){try{function decodeCharParam(value){if(value)for(var param in paramsStopEncode){var regex=eval("/"+param+"/g");value=value.replace(regex,paramsStopEncode[param])}return value}var queryString="",paramsStopEncode={};if(paramsStopEncode["%24"]="$","undefined"!=typeof params)for(var i in Object.keys(params)){var k=Object.keys(params[i])[0],paramValue=Object.values(params[i])[0];paramValue instanceof Date&&(paramValue=paramValue.toISOString());var v=paramValue+"";queryString&&(queryString+="&"),queryString+=decodeCharParam(encodeURIComponent(k))+"="+encodeURIComponent(v)}let existRoute=e=>{if(this.cronapi.$scope&&this.cronapi.$scope.$state){let a=this.cronapi.$scope.$state.get(),t=e.split("/").slice(2),n="views/"+t.join("/")+".view.html";a.forEach(a=>{let t=a.templateUrl;if(t instanceof Function){let e=/('|")[a-z0-9/.]+('|")/gim.exec(t.toString());null!==e&&void 0!==e&&e[0]&&(t=e[0].replace(/'/g,""))}t===n&&(e="#"+a.url)})}return e};var oldHash=window.location.hash;view=existRoute(view),window.location.hash=view+(queryString?"?"+queryString:"");var oldHashToCheck=oldHash+(-1<oldHash.indexOf("?")?"":"?"),viewToCheck=view+(-1<view.indexOf("?")?"":"?");this.cronapi.forceCloseAllModal(),0<=oldHashToCheck.indexOf(viewToCheck)&&window.location.reload()}catch(a){alert(a)}},this.cronapi.screen.openUrl=function(e,a,t,n){try{var o="_self",r="";a&&"true"==a.toString().toLowerCase()&&(o="_blank"),t&&(r+="width="+t+","),n&&(r+="height="+n+","),window.open(e,o,r)}catch(a){alert(a)}},this.cronapi.screen.getParam=function(e){try{for(var a,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)a=n[o].split("="),t.push(a[0]),t[a[0]]=a[1];if(t[e]!==void 0)return decodeURIComponent(t[e])}catch(a){}return null},this.cronapi.screen.confimDialog=function(e){var a=confirm(e);return a},this.cronapi.screen.createDefaultModal=function(e,a,t,n,o,r,c){$("#modalTemplateTitle").text(e),$("#modalTemplateBody").text(a),$("#modalTemplateCancel").text(t),$("#modalTemplateSave").text(n),$("#modalTemplateClose").unbind("click"),$("#modalTemplateClose").click(c),$("#modalTemplateCancel").unbind("click"),$("#modalTemplateCancel").click(r),$("#modalTemplateSave").unbind("click"),$("#modalTemplateSave").click(o),this.cronapi.screen.showModal("modalTemplate")},this.cronapi.screen.showModal=function(e){let a=`#${e}`,t=$(":focus"),n=$(":hover");try{$(a).one("shown.bs.modal",function(){t.length&&($(this).data("lastFocused",t),$(this).data("lastFocusedClass","."+t.attr("class").split(" ").join("."))),n.length&&$(this).data("lastHovers",n);let e=$(this).find("input:not(:hidden)")[0];e&&e.focus()}).one("hidden.bs.modal",function(){let e,t=$(a).data("lastFocused"),n=!1;t&&t.length&&(e=$($(this).data("lastFocusedClass")),n=$("html").has(t).length?t.is(":visible"):e.is(":visible"));let o=function(e){return $(e[e.length-1]).closest("li:visible").find("a:first")},r=$(a).data("lastHovers");if(n)e.focus(),t.focus();else if($("html").has(t).length){let e=o(t);e.focus()}else if(r&&r.length){let e=o(r);e.focus()}}).modal({backdrop:"static",keyboard:!1})}catch(t){$(a).show()}$(a).css("overflow-y","auto")},this.cronapi.screen.setActiveTab=function(e){this.cronapi.$scope.safeApply(function(){$("#"+e).attr("data-target")===void 0?$("[data-target=\"#"+e+"\"]").tab("show"):$("#"+e).tab("show")})},this.cronapi.screen.hideModal=function(a){try{$("#"+a).modal("hide")}catch(t){$("#"+a).hide()}},this.cronapi.screen.showIonicModal=function(e){$("#"+e).data("cronapp-modal")&&$("#"+e).data("cronapp-modal").remove(),this.cronapi.$scope.$ionicModal.fromTemplateUrl(e,{scope:this.cronapi.$scope,animation:"slide-in-up"}).then(function(a){$("#"+e).data("cronapp-modal",a),a.show()})},this.cronapi.screen.hideIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");a.remove(),$("#"+e).data("cronapp-modal",null)}},this.cronapi.screen.isShownIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");return a.isShown()}return!1},this.cronapi.screen.showLoading=function(){this.cronapi.$scope.$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})},this.cronapi.screen.hide=function(){this.cronapi.$scope.$ionicLoading.hide()},this.cronapi.screen.getHostapp=function(){return window.hostApp},this.cronapi.screen.searchIds=function(){},this.cronapi.screen.showComponent=function(e){$("#"+e).get(0).style.setProperty("display","block","important")},this.cronapi.screen.hideComponent=function(e){$("#"+e).get(0).style.setProperty("display","none","important")},this.cronapi.screen.disableComponent=function(e){let a;if(window.cordova)a=this.cronapi.$scope;else{let e=window.angular.element("body").injector();a=e.get("$rootScope")}let t=()=>{"$apply"!==a.$$phase&&"$digest"!==a.$$phase?$("#"+e).data("kendoComboBox")?$("#"+e).data("kendoComboBox").enable(!1):$("#"+e).data("kendoDropDownList")?$("#"+e).data("kendoDropDownList").enable(!1):$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!0)}):setTimeout(()=>t(),200)};t()},this.cronapi.screen.enableComponent=function(e){let a;if(window.cordova)a=this.cronapi.$scope;else{let e=window.angular.element("body").injector();a=e.get("$rootScope")}let t=()=>{"$apply"!==a.$$phase&&"$digest"!==a.$$phase?$("#"+e).data("kendoComboBox")?$("#"+e).data("kendoComboBox").enable(!0):$("#"+e).data("kendoDropDownList")?$("#"+e).data("kendoDropDownList").enable(!0):$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!1)}):setTimeout(()=>t(),200)};t()},this.cronapi.screen.focusComponent=function(e){this.cronapi.$scope.safeApply(function(){tinyMCE&&tinyMCE.get(e)!==void 0?tinyMCE.get(e).focus():$("#"+e).find("*").addBack().focus()})},this.cronapi.screen.changeAttrValue=function(e,a,t){$("#"+e).attr(a,t)},this.cronapi.screen.changeContent=function(e,a,t){if($("#"+e).html(a),!0===t||"true"===t){var n=angular.injector(["ng"]),o=this;n.invoke(["$compile",function(a){a(document.querySelector("#"+e))(o.cronapi.$scope)}])}},this.cronapi.screen.logout=function(){this.cronapi.$scope.logout!=null&&this.cronapi.$scope.logout()},this.cronapi.screen.refreshDatasource=function(e,a){!0==a||"true"==a?this[e].search(this[e].terms,this[e].caseInsensitive):this[e].search("",this[e].caseInsensitive)},this.cronapi.screen.loadMore=function(e){getDatasource(e).$apply(function(){getDatasource(e).nextPage()})},this.cronapi.screen.hasNextPage=function(e){return getDatasource(e).hasNextPage()},this.cronapi.screen.load=function(e){getDatasource(e).fetch({params:{}},void 0,void 0,{origin:"button"})},this.cronapi.dateTime={},this.cronapi.dateTime.formats=function(){var e=[];return e="pt_br"==this.cronapi.$translate.use()?["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY","DD-MM-YYYY HH:mm:ss","DD-MM-YYYY"]:["MM/DD/YYYY HH:mm:ss","MM/DD/YYYY","MM-DD-YYYY HH:mm:ss","MM-DD-YYYY"],e.push("YYYY-MM-DDTHH:mm:ss"),e.push("HH:mm:ss"),e.push("MMMM"),e},this.cronapi.dateTime.getMomentObj=function(e){var a=moment;if(e instanceof moment)return e;if(e instanceof Date)return a(e).utcOffset(window.timeZoneOffset);var t=this.cronapi.dateTime.formats(),n=null;for(var o in t)if(n=a(e,t[o]),n.isValid())break;return n},this.cronapi.dateTime.getSecond=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("second"):0},this.cronapi.dateTime.getMinute=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("minute"):0},this.cronapi.dateTime.getHour=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("hour"):0},this.cronapi.dateTime.getYear=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("year"):0},this.cronapi.dateTime.getMonth=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("month")+1:0},this.cronapi.dateTime.getDay=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("date"):0},this.cronapi.dateTime.getSecondsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"seconds")},this.cronapi.dateTime.getMinutesBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"minutes")},this.cronapi.dateTime.getHoursBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"hours")},this.cronapi.dateTime.getDaysBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"days")},this.cronapi.dateTime.getMonthsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"months")},this.cronapi.dateTime.getYearsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"years")},this.cronapi.dateTime.incSecond=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("seconds",a).toDate()},this.cronapi.dateTime.incMinute=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("minutes",a).toDate()},this.cronapi.dateTime.incHour=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("hours",a).toDate()},this.cronapi.dateTime.incDay=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("days",a).toDate()},this.cronapi.dateTime.incMonth=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("months",a).toDate()},this.cronapi.dateTime.incYear=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("years",a).toDate()},this.cronapi.dateTime.getNow=function(){var e=moment();return e.toDate()},this.cronapi.dateTime.formatDateTime=function(e,a){return this.cronapi.dateTime.getMomentObj(e).format(a)},this.cronapi.dateTime.newDate=function(e,a,t,n,o,r){var c=new Date;return c.setYear(e),c.setMonth(a-1),c.setDate(t),c.setHours(n),c.setMinutes(o),c.setSeconds(r),this.cronapi.dateTime.getMomentObj(c).toDate()},this.cronapi.dateTime.updateDate=function(e,a,t,n,o,r,c,s){var l=this.cronapi.dateTime.getMomentObj(e).toDate();if(l&&!isNaN(l.getTime()))l.setYear(a),l.setMonth(t-1),l.setDate(n),l.setHours(o),l.setMinutes(r),l.setSeconds(c),l.setMilliseconds(s);else return void this.cronapi.screen.notify("error",this.cronapi.i18n.translate("InvalidDate",[]));return this.cronapi.dateTime.getMomentObj(l).toDate()},this.cronapi.dateTime.updateNewDate=function(e,a,t){var n=this.cronapi.dateTime.getMomentObj(e).toDate();if(n&&!isNaN(n.getTime()))"year"===a?n.setYear(t):"month"===a?n.setMonth(t-1):"day"===a?n.setDate(t):"hour"===a?n.setHours(t):"minute"===a?n.setMinutes(t):"second"===a?n.setSeconds(t):"millisecond"===a?n.setMilliseconds(t):void 0;else return void this.cronapi.screen.notify("error",this.cronapi.i18n.translate("InvalidDate",[]));return this.cronapi.dateTime.getMomentObj(n).toDate()},this.cronapi.text={},this.cronapi.text.prompt=function(){return null},this.cronapi.text.newline=function(){return"\n"},this.cronapi.text.replaceAll=function(e,a,t,n){return this.cronapi.logic.isNull(e)||this.cronapi.logic.isNull(a)||this.cronapi.logic.isNull(n)?null:"-"===t?e.replace(a,n):e.replace(new RegExp(a,t),n)},this.cronapi.xml={},this.cronapi.xml.newXMLEmpty=function(){return $.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>")},this.cronapi.xml.newXMLEmptyWithRoot=function(e){var a=$.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>");return a.removeChild(a.firstElementChild),a.appendChild(e),a},this.cronapi.xml.newXMLElement=function(e,a){var t=document.createElement(e);return t.textContent=a,t},this.cronapi.xml.addXMLElement=function(e,a){try{var t=a.cloneNode(!0);return e.appendChild(t),!0}catch(a){return!1}},this.cronapi.xml.XMLHasRootElement=function(e){return!!(e&&e.getRootNode())},this.cronapi.xml.XMLGetRootElement=function(e){return e instanceof XMLDocument?e.firstElementChild:e.getRootNode()},this.cronapi.xml.XMLDocumentToText=function(e){if(e instanceof XMLDocument)return $($($(e.firstElementChild).context.outerHTML).removeAttr("xmlns"))[0].outerHTML;if(1<$(e).size()){var a="";return $.each($(e).toArray(),function(e,t){a+=$($(t)[0].outerHTML).removeAttr("xmlns")[0].outerHTML}),a}return $($($(e).context.outerHTML).removeAttr("xmlns"))[0].outerHTML},this.cronapi.xml.getChildren=function(e,a){return e instanceof XMLDocument?e.firstElementChild.toArray:a?a.localName?$(e).find(a.localName).toArray():$(e).find(a).toArray():$(e).children().toArray()},this.cronapi.xml.setAttribute=function(e,a,t){return!!a&&(e instanceof XMLDocument?(e.firstChild.setAttribute(a,t),!0):!!e&&(e.setAttribute(a,t),!0))},this.cronapi.xml.getAttributeValue=function(e,a){return a?e instanceof XMLDocument?e.firstChild.getAttribute(a)?e.firstChild.getAttribute(a):"":e&&a?e.getAttribute(a):"":""},this.cronapi.xml.getParentNode=function(e){return e instanceof XMLDocument?e.firstChild:e.parentNode},this.cronapi.xml.setElementContent=function(e,a){e instanceof XMLDocument&&(e.firstChild.textContent=a),e.textContent=a},this.cronapi.xml.getElementContent=function(e){return e instanceof XMLDocument?e.firstChild.innerText:e.innerText},this.cronapi.xml.removeElement=function(e,a){e instanceof XMLDocument?a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.firstElementChild.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.firstElementChild.children),function(e,a){a.remove()}):a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.children),function(e,a){a.remove()})},this.cronapi.xml.getElementName=function(e){return e instanceof XMLDocument?e.firstChild.localName:e.localName},this.cronapi.xml.renameElement=function(e,a){var t=e.outerHTML.replace(e.localName,a);t=t.replace("/"+e.localName,"/"+a),t=$(t).removeAttr("xmlns"),e.replaceWith(t[0])},this.cronapi.logic={},this.cronapi.logic.isNull=function(e){return null===e||"undefined"==typeof e||e==null},this.cronapi.logic.isEmpty=function(e){return""===e},this.cronapi.logic.isNullOrEmpty=function(e){return this.cronapi.logic.isNull(e)||this.cronapi.logic.isEmpty(e)},this.cronapi.logic.typeOf=function(e,a){return"array"===a?Array.isArray(e):!("object"===a&&Array.isArray(e))&&typeof e==a},this.cronapi.i18n={},this.cronapi.i18n.translate=function(e,a){if(e){for(var t,n=this.cronapi.$translate.instant(e),o=0;o<a.length;o++)if(t=a[o],null!=t&&"undefined"!=typeof t){var r=new RegExp("\\{"+o+"\\}","g");n=n.replace(r,t)}return n}},this.cronapi.internal={},this.cronapi.internal.focusFormInput=function(){let e=$($("form")[0]),a=$(e.find("input")[0]);if(a&&a.length){let e=setInterval(()=>{a.is(":visible")&&(a.focus(),clearInterval(e))},100)}},this.cronapi.forceCloseAllModal=function(){var e=$(".modal.fade.in");e&&e.each((e,a)=>this.cronapi.screen.hideModal(a.id)),$(".modal-backdrop.fade.in").remove()},this.cronapi.internal.setFile=function(e,a){this.cronapi.internal.fileToBase64(a,function(a){this.cronapi.screen.changeValueOfField(e,a)}.bind(this))},this.cronapi.internal.fileToBase64=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){var e=t.target.result.substr(t.target.result.indexOf("base64,")+7);a(e)}},this.cronapi.internal.startCamera=function(e,a,t,n,o){if(window.cordova&&window.cordova.platformId&&"browser"!==window.cordova.platformId){var r=this;navigator.camera.getPicture(function(a){r.cronapi.screen.changeValueOfField(e,a)},function(e){console.error(e),r.cronapi.$scope.Notification.error(message)},{quality:parseInt(a),destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG,correctOrientation:!0,allowEdit:"true"==t,targetWidth:parseInt(n),targetHeight:parseInt(o)})}else{function a(e,a){var t=window.innerWidth,n=window.innerHeight,o=0;return o=t/e,a*=o,e*=o,e>t&&(o=t/e,a*=o,e*=o),a>n&&(o=n/a,e*=o,a*=o),{width:e,height:a}}var c="<div class=\"camera-container\" style=\"margin-left:-$marginleft$;margin-top:-$margintop$\">                                      <button class=\"btn btn-success button button-balanced\" id=\"cronapiVideoCaptureOk\" style=\"position: absolute; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-ok icon ion-checkmark-round\"></span>                                          <span class=\"sr-only\">{{\"Upload.camera\" | translate}}</span>                                      </button>                                      <button class=\"btn btn-danger button button-assertive button-cancel-capture\" id=\"cronapiVideoCaptureCancel\" style=\"position: absolute; margin-left: 42px; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-remove icon ion-android-close\"></span>                                          <span class=\"sr-only\">{{\"Cancel\" | translate}}</span>                                      </button>                                      <video id=\"cronapiVideoCapture\" style=\"height: $height$; width: $width$;\" autoplay=\"\"></video>                              </div>",s=null;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){s=t;var n=a(t.getTracks()[0].getSettings().width,t.getTracks()[0].getSettings().height),o=n.width,r=n.height;try{o=parseInt(o/2),r=parseInt(r/2)}catch(a){}c=c.split("$height$").join(n.height+"px").split("$width$").join(n.width+"px").split("$marginleft$").join(o+"px").split("$margintop$").join(r+"px");var l=$(c);l.prependTo("body");var p=document.getElementById("cronapiVideoCapture");l.find("#cronapiVideoCaptureCancel").on("click",function(){null!=s&&0<s.getTracks().length&&s.getTracks()[0].stop(),$(l).remove()}.bind(this)),l.find("#cronapiVideoCaptureOk").on("click",function(){this.cronapi.internal.captureFromCamera(e,n.width,n.height),null!=s&&0<s.getTracks().length&&s.getTracks()[0].stop(),$(l).remove()}.bind(this)),p.srcObject=t,p.onloadedmetadata=function(){p.play()}}.bind(this))}},this.cronapi.internal.downloadFileEntityMobile=function(a,t,n,o){var r,c,s=null;if(n)r=a.data[n][t],c=a.data[n];else try{r=a.active[t],c=a.active}catch(n){r=a[t],c=a}try{var s=JSON.parse(r)}catch(a){}if(s){var l=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/filePreview/");window.open(l+s.path,"_system")}else if(r.startsWith("https://")||r.startsWith("http://"))window.open(r,"_system");else if(a.isOData())cronapi.internal.makeDownloadFromBytes(r,o);else{var p="/api/cronapi/downloadFile",d=a.entity.split("/"),m=d[d.length-1];if(-1<m.indexOf(":")){for(var g="",u=d[3].split("."),h=0;h<u.length-1;h++)g+=u[h]+".";var e=m.split(":");m=g+e[e.length-1]}p+="/"+m,p+="/"+t;var f=c,b=a.getKeyValues(f),y=0;for(var v in b)p=0==y?p+"/"+f[v]:p+":"+f[v],y++;var l=this.cronapi.internal.getAddressWithHostApp(p);window.open(l,"_system")}},this.cronapi.internal.captureFromCamera=function(e,a,t){var n=document.createElement("canvas");n.width=a,n.height=t;var o=n.getContext("2d"),r=document.getElementById("cronapiVideoCapture");o.drawImage(r,0,0,a,t);var c=n.toDataURL().substr(22);this.cronapi.screen.changeValueOfField(e,c)},this.cronapi.internal.castBinaryStringToByteArray=function(e){for(var a=e.length,t=new Uint8Array(a),n=0;n<a;n++)t[n]=e.charCodeAt(n);return t},this.cronapi.internal.castBase64ToByteArray=function(e){var a=window.atob(e);return this.cronapi.internal.castBinaryStringToByteArray(a)},this.cronapi.internal.castByteArrayToString=function(e){return _StringfromCharCode.apply(null,new Uint16Array(e))},this.cronapi.internal.generatePreviewDescriptionByte=function(data,fileInfo){var json;let fileInfoContent=eval(fileInfo);try{json=fileInfoContent?JSON.parse(fileInfoContent):JSON.parse(data)}catch(e){try{json=JSON.parse(window.atob(data))}catch(e){if(data&&data.match(/__odataFile_/g)){var file=eval(data);json=cronapi.internal.getJsonDescriptionFromFile(file)}else if(data&&(data.startsWith("http://")||data.startsWith("https://"))){json={};var urlSplited=data.split("/"),fullName=urlSplited[urlSplited.length-1].replace("?dl=0",""),fullNameSplited=fullName.split("."),extension="."+fullNameSplited[fullNameSplited.length-1];json.fileExtension=extension,json.name=fullName.replace(extension,""),json.contentType="file/"+extension.replace(".","")}else if(data&&this.cronapi.internal.isBase64(data)){var fileName="download",fileExtesion=this.cronapi.internal.getExtensionBase64(data),contentType=this.cronapi.internal.getContentTypeFromExtension(fileExtesion);fileName+=fileExtesion,json={},json.fileExtension=fileExtesion,json.name=fileName,json.contentType=contentType}}}if(json){25<json.name.length&&(json.name=json.name.substr(0,22)+"...");var result=("pt_br"==this.cronapi.$translate.use()?"<b>Nome:</b> <br/>":"<b>Name:</b> <br/>")+(void 0===json.contentType?"":json.name+"<br/>");return result+=void 0===json.contentType?"":"<b>Content-Type:</b> <br/>"+json.contentType+"<br/>",result+=""===json.fileExtension?"":"pt_br"==this.cronapi.$translate.use()?"<b>Extens\xE3o:</b> <br/>"+json.fileExtension+"<br/>":"<b>Extension:</b> <br/>"+json.fileExtension+"<br/>",result}},this.cronapi.internal.getContentTypeFromExtension=function(e){if(e)switch(e.toLowerCase()){case".png":return"image/png";case".jpg":return"image/jpeg";case".mp4":return"video/mp4";case".pdf":return"application/pdf";case".ico":return"image/vnd.microsoft.icon";case".rar":return"application/x-rar-compressed";case".rtf":return"application/rtf";case".txt":return"text/plain";case".zip":return"application/zip";case".srt":return"text/srt";default:return"unknown";}},this.cronapi.internal.getExtensionBase64=function(e){if(e){var a=e.substr(0,5);switch(a.toLocaleUpperCase()){case"IVBOR":return".png";case"/9J/4":return".jpg";case"AAAAF":return".mp4";case"JVBER":return".pdf";case"AAABA":return".ico";case"UMFYI":return".rar";case"E1XYD":return".rtf";case"U1PKC":return".txt";case"UESDB":return".zip";case"MQOWM":case"77U/M":return".srt";default:return"";}}return""},this.cronapi.internal.isBase64=function(e){try{return btoa(atob(e))==e}catch(e){return!1}},this.cronapi.internal.downloadUrl=function(e,a){let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",a);let n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)},this.cronapi.internal.makeDownloadFromBytes=function(valueContent,fileInfo){var bytesOrFileInput,urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL,fileName="download";if(valueContent.match(/__odataFile_/g))bytesOrFileInput=eval(valueContent),fileName=bytesOrFileInput.name;else{fileName+=cronapi.internal.getExtensionBase64(valueContent);try{valueContent=window.atob(valueContent)}catch(a){}bytesOrFileInput=cronapi.internal.castBinaryStringToByteArray(valueContent)}let fileInfoDescription=eval(fileInfo);if(fileInfoDescription){let e=JSON.parse(fileInfoDescription);fileName=e.name}var url=urlCreator.createObjectURL(new Blob([bytesOrFileInput],{type:"application/octet-stream"}));cronapi.internal.downloadUrl(url,fileName)},this.cronapi.internal.downloadFileEntity=function(a,t,n,o){var r,c,s=null;if(n)r=a.data[n][t],c=a.data[n];else try{r=a.active[t],c=a.active}catch(n){r=a[t],c=a}try{var s=JSON.parse(r)}catch(a){}if(s)window.open("/api/cronapi/filePreview/"+s.path);else if(r.startsWith("https://")||r.startsWith("http://"))window.open(r);else if(a.isOData())cronapi.internal.makeDownloadFromBytes(r,o);else{var l="/api/cronapi/downloadFile",p=a.entity.split("/"),d=p[p.length-1];if(-1<d.indexOf(":")){for(var m="",g=p[3].split("."),u=0;u<g.length-1;u++)m+=g[u]+".";var e=d.split(":");d=m+e[e.length-1]}l+="/"+d,l+="/"+t;var h=JSON.parse(localStorage.getItem("_u"))||{},f=c,b=this.cronapi.internal.getAddressWithHostApp(l);this.$promise=this.cronapi.$scope.$http({method:"POST",url:b,data:f?JSON.stringify(f):null,responseType:"blob",headers:{"Content-Type":"application/json","X-AUTH-TOKEN":h.token}}).success(function(e,a,t){t=t();var n=t["x-filename"]||"download.bin",o=window.URL||window.webkitURL||window.mozURL||window.msURL;try{var r=o.createObjectURL(e);cronapi.internal.downloadUrl(r,n)}catch(e){console.log("Error downloading file"),console.log(e)}}.bind(this)).error(function(){console.log("Error downloading file")}.bind(this))}},this.cronapi.internal.uploadFileAjax=function(e,a,t){var n=new FormData;n.append("file",a);var o=JSON.parse(localStorage.getItem("_u"))||{},r=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/uploadFile");this.$promise=this.cronapi.$scope.$http({method:"POST",url:r,data:n,headers:{"Content-Type":void 0,"X-AUTH-TOKEN":o.token},onProgress:function(e){if(e.lengthComputable){var a=0|100*(e.loaded/e.total),n=$("#"+t);if(0<n.length)if("bootstrapProgress"==n.data("type"))100>a?(n.show(),n.find(".progress-bar").css("width",a+"%")):(n.hide(),n.find(".progress-bar").css("width","0%"));else{var o=document.getElementById(t);o.value=o.innerHTML=a}}}}).success(function(a){this.cronapi.screen.changeValueOfField(e,a.jsonString)}.bind(this)).error(function(){alert("Error uploading file")}.bind(this))},this.cronapi.internal.getFieldFromActiveString=function(e){var a=/.active.([a-zA-Z0-9_-]*)/g,t=a.exec(e),n=t[1];return n},this.cronapi.internal.getJsonDescriptionFromFile=function(e){let a={};if(e){let t=e.name.split("."),n="."+t[t.length-1];a.fileExtension=n,a.name=e.name,a.contentType=e.type||"unknown"}return a},this.cronapi.internal.uploadFile=function(field,file,progressId,fileInfo){if(file){var regexForDatasource=/(.*?).active./g,groupDatasource=regexForDatasource.exec(field);if(groupDatasource){var datasource=eval(groupDatasource[1]);if(datasource.isOData()){let e=cronapi.internal.getFieldFromActiveString(field),a=datasource.getFieldSchema(e);if(a&&"Binary"==a.type){if(datasource.active["__odataFile_"+e]=file,datasource.active[e]=datasource.name+".active.__odataFile_"+e,fileInfo){let e=cronapi.internal.getJsonDescriptionFromFile(file),a=cronapi.internal.getFieldFromActiveString(fileInfo);datasource.active[a]=JSON.stringify(e)}return}}}this.cronapi.internal.uploadFileAjax(field,file,progressId)}},this.cronapi.object={},this.cronapi.object.getProperty=function(e,a){var t=a.split(".");if(1<t.length){var n=function(e,a,t){return t||(t=0),void 0===e[a[t]]&&(e[a[t]]={}),t++,t<a.length?n(e[a[t-1]],a,t):e[a[t-1]]};return n(e,t,0)}return e[a]},this.cronapi.object.setProperty=function(e,a,t){var n=a.split(".");if(1<n.length){var o=function(e,a,t,n){n||(n=0),e[a[n]]===void 0&&(e[a[n]]={}),n++,n<a.length?o(e[a[n-1]],a,t,n):e[a[n-1]]=t};o(e,n,t,0)}else e[a]=t},this.cronapi.object.createObjectFromString=function(e){return JSON.parse(e)},this.cronapi.object.createObjectLoginFromString=function(e,a){return JSON.parse(JSON.stringify({username:e,password:a}))},this.cronapi.object.serializeObject=function(e){return JSON.stringify(e)},this.cronapi.object.deleteProperty=function(e,a){delete e[a]},this.cronapi.object.newObject=function(){var e={};if(arguments&&0<arguments.length)for(var a,t=0;t<arguments.length;t++)a=arguments[t],a.name&&(e[a.name]=a.value);return e},this.cronapi.object.getObjectField=function(e,a){var t;return e&&a&&(t=e[a]),t},this.cronapi.json={},this.cronapi.json.createObjectFromString=function(e){return this.cronapi.object.createObjectFromString(e)},this.cronapi.json.setProperty=function(e,a,t){this.cronapi.object.setProperty(e,a,t)},this.cronapi.json.deleteProperty=function(e,a){this.cronapi.object.deleteProperty(e,a)},this.cronapi.json.getProperty=function(e,a){return this.cronapi.object.getProperty(e,a)},this.cronapi.cordova={},this.cronapi.cordova.vibrate=function(e){navigator.vibrate(e)},this.cronapi.cordova.device={},this.cronapi.cordova.device.getFirebaseToken=function(e,a){document.addEventListener("deviceready",function(){try{window.FirebasePlugin.getToken(this.cronapi.util.handleCallback(e),this.cronapi.util.handleCallback(a))}catch(t){console.error(t),a(t)}},!1)},this.cronapi.cordova.device.getFirebaseNotificationData=function(e,a){document.addEventListener("deviceready",function(){try{window.FirebasePlugin.onMessageReceived(function(a){e(a)},function(e){a(e)})}catch(a){console.warn(a)}try{window.FirebasePlugin.onNotificationOpen(function(a){e(a)},function(e){a(e)})}catch(a){console.warn(a)}},!1)},this.cronapi.cordova.device.getDeviceInfo=function(e){return window.device[e]},this.cronapi.cordova.geolocation={},this.cronapi.cordova.geolocation.getCurrentPosition=function(e,a){navigator.geolocation.getCurrentPosition(e,a)},this.cronapi.cordova.geolocation.watchPosition=function(e,a,t,n,o){return navigator.geolocation.watchPosition(e,a,{maximumAge:t,timeout:n,enableHighAccuracy:o})},this.cronapi.cordova.geolocation.clearWatchPosition=function(e){navigator.geolocation.clearWatch(e)},this.cronapi.cordova.camera={},this.cronapi.cordova.camera.getPicture=function(e,a,t,n,o,r){(o===void 0||null===o)&&(o=0),r=!0===r||"true"===r,navigator.camera.getPicture(this.cronapi.util.handleCallback(e),this.cronapi.util.handleCallback(a),{destinationType:+t,sourceType:+n,mediaType:+o,allowEdit:r})},this.cronapi.cordova.camera.qrCodeScanner=function(e,a,t,n){cordova.plugins.barcodeScanner.scan(function(e){t(e.text)},function(e){"Scan is already in progress"!==e&&n(e)},{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,saveHistory:!0,prompt:a,resultDisplayDuration:500,formats:e,orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},this.cronapi.cordova.file={},this.cronapi.cordova.file.getDirectory=function(e){var a;return"0"==e?a=cordova.file.dataDirectory:(a=cordova.file.externalApplicationStorageDirectory,!a&&(a=cordova.file.externalDataDirectory),!a&&(a=cordova.file.syncedDataDirectory)),a},this.cronapi.cordova.file.removeFile=function(e,a,t){window.resolveLocalFileSystemURL(e,function(e){e.remove(function(e){a&&a(e)}.bind(this),this.cronapi.util.handleCallback(t))}.bind(this),this.cronapi.util.handleCallback(t))},this.cronapi.cordova.file.readFile=function(e,a,t,n){window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var t=new FileReader;switch(t.onloadend=function(){a(this.result)},n){case"ARRAYBUFFER":{t.readAsArrayBuffer(e);break}case"TEXT":{t.readAsText(e);break}case"BINARYSTRING":{t.readAsBinaryString(e);break}case"DATAURL":{t.readAsDataURL(e);break}default:t.readAsText(e);}}.bind(this),this.cronapi.util.handleCallback(t))}.bind(this),this.cronapi.util.handleCallback(t))},this.cronapi.cordova.file.createFile=function(e,a,t,n,o){e||getDirectory(0);window.resolveLocalFileSystemURL(e,function(r){console.log(e),r.getFile(a,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){console.log("Write of file \""+a+"\"\" completed.")},e.onerror=function(a){console.log("Write failed: "+a.toString())};var o=new Blob([t],{type:"text/plain"});e.write(o),n&&setTimeout(function(){n()}.bind(this),500)}.bind(this),this.cronapi.util.handleCallback(o))}.bind(this),this.cronapi.util.handleCallback(o))}.bind(this),this.cronapi.util.handleCallback(o))},this.cronapi.cordova.file.createDirectory=function(e,a,t,n){window.resolveLocalFileSystemURL(e,function(e){e.getDirectory(a,{create:!0},function(e){t&&t(e)}.bind(this),this.cronapi.util.handleCallback(n))}.bind(this),this.cronapi.util.handleCallback(n))},this.cronapi.cordova.storage={},this.cronapi.cordova.storage.setStorageItem=function(e,a){var t=window.localStorage;t?t.setItem(e,a):console.error("Local Storage not Found!")},this.cronapi.cordova.storage.getStorageItem=function(e){var a=window.localStorage;return a?a.getItem(e):void console.error("Local Storage not Found!")},this.cronapi.cordova.storage.removeStorageItem=function(e){var a=window.localStorage;a?a.removeItem(e):console.error("Local Storage not Found!")},this.cronapi.cordova.connection={},this.cronapi.cordova.connection.getConnection=function(){return navigator.connection.type},this.cronapi.cordova.connection.verifyConnection=function(e){return navigator.connection.type==e},this.cronapi.cordova.database={},this.cronapi.cordova.database.nameDefault="cronappDB",this.cronapi.cordova.database.openDatabase=function(e){let a=window.openDatabase;return window.sqlitePlugin&&(a=window.sqlitePlugin.openDatabase),a(e?e:this.cronapi.cordova.database.nameDefault,"1.0",e?e:this.cronapi.cordova.database.nameDefault,1e6)},this.cronapi.cordova.database.executeSql=function(e,a,t,n,o){var r=this.cronapi.cordova.database.openDatabase(e);r.transaction(function(e){e.executeSql(a,t,function(e,a){n.call(this,Object.values(a.rows))}.bind(this))}.bind(this),function(a){console.log(a),o(a)}.bind(this))},this.cronapi.cordova.database.executeMultipleSql=function(e,a,t,n){var o=this.cronapi.cordova.database.openDatabase(e);let r=[],c=a.split(";");for(let s in c){let e=c[s];if(!e)break;let a=new Promise((a,t)=>{o.transaction(function(n){n.executeSql(e.trim(),[],function(e,t){a(t)}.bind(this),function(e,a){t(a)}.bind(this))}.bind(this))});r.push(a)}Promise.all(r).then(function(e){t(e)}.bind(this)).catch(function(a){n(a)}.bind(this))},this.cronapi.cordova.database.openInAppBrowser=function(e){cordova.InAppBrowser&&cordova.InAppBrowser.open(e,"_blank","location=no")},this.cronapi.internal.ptDate=function(e){var a,t=e[1],n=e[2],o=e[3],r=e[5],c=e[6],s=e[7];return a=r?new Date(o,n-1,t,r,c,s):new Date(o,n-1,t,0,0,0),a},this.cronapi.internal.enDate=function(e){var a,t=e[1],n=e[2],o=e[3],r=e[5],c=e[6],s=e[7];return a=r?new Date(o,t-1,n,r,c,s):new Date(o,t-1,n,0,0,0),a},this.cronapi.internal.parseBoolean=function(e){return!!e&&("boolean"==typeof e?e:(e=e.toString().toLowerCase().trim(),"1"==e||"true"==e))},this.cronapi.internal.removeAccents=function(e){var a="";for(i=0;i<e.length;i++)a+=0<="\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1))?"aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC".substr("\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1)),1):e.substr(i,1);return a},this.cronapi.internal.arrayRemove=function(e,a){var t=this.cronapi.internal.arrayIndexOf(e,a);-1!=t&&e.splice(t,1)},this.cronapi.internal.arrayIndexOf=function(e,a){var t=-1;return $(e).each(function(e){a==this&&(t=e)}),t},this.cronapi.internal.replaceAll=function(e,a,t){return e.toString().split(a).join(t)},this.cronapi.internal.getWindowHeight=function(){$(window).height()},this.cronapi.internal.getWindowWidth=function(){$(window).width()},this.cronapi.internal.getAddressWithHostApp=function(e){var a=window.hostApp||"";if(a=a.endsWith("/")?a.substr(0,a.length-1):a,e){var t=e.startsWith("/")?e.substr(1):e;a=""===a?t:a+"/"+t}return a},this.cronapi.internal.Url={encode:function(e){return e?escape(this.cronapi.internal.Url._utf8_encode(e)):""},decode:function(e){return e?this.cronapi.internal.Url._utf8_decode(unescape(e)):""},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a,t="",o=0;o<e.length;o++)a=e.charCodeAt(o),128>a?t+=_StringfromCharCode(a):127<a&&2048>a?(t+=_StringfromCharCode(192|a>>6),t+=_StringfromCharCode(128|63&a)):(t+=_StringfromCharCode(224|a>>12),t+=_StringfromCharCode(128|63&a>>6),t+=_StringfromCharCode(128|63&a));return t},_utf8_decode:function(e){for(var a="",t=0,n=c1=c2=0;t<e.length;)n=e.charCodeAt(t),128>n?(a+=_StringfromCharCode(n),t++):191<n&&224>n?(c2=e.charCodeAt(t+1),a+=_StringfromCharCode((31&n)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=_StringfromCharCode((15&n)<<12|(63&c2)<<6|63&c3),t+=3);return a}},this.cronapi.internal.stringToJs=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},this.cronapi.internal.getErrorMessage=function(e,a){try{var t=null;if("object"==typeof e?e.data&&("object"==typeof e.data?t=e.data:"string"==typeof e.data&&(t=JSON.parse(e.data))):"string"==typeof e&&(t=JSON.parse(e)),t&&t.error)return t.error}catch(a){}return a},this.cronapi.util.upload=function(e,a,t,n,o){this.UploadService.upload({description:a,id:e,filter:t,maxSize:n,multiple:o,scope:this})},this.cronapi.util.getBaseUrl=function(){return window.location.origin},this.cronapi.chart={},this.cronapi.chart.createChart=function(e,a,t,n){function o(){return p<l.length?p++:p=0,p}function r(){""==m.data.datasets[0].label&&(null==m.options.legend?(m.options.legend={},m.options.legend.display=!1):m.options.legend.display=!1)}function c(e){var a=[],t=4;for(Array.isArray(e[4])&&"object"==typeof e[4][0]&&("label"in e[4][0])&&("data"in e[4][0])&&(e=e[4],t=0),t;t<e.length;t++)e[t].label?e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(e[t].label,e[t],null)),a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options))):a.push(cronapi.chart.createDataset(e[t].label,e[t].data,null)):e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(null,e[t],e[t].options)),a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options))):e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,null)):a.push(cronapi.chart.createDataset(null,e[t],null));return a}function s(){null==m.options?(m.options={},m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}]):null==m.options.scales&&(m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}])}var l=["#FF5C00","#0E53A7","#48DD00","#FFD500","#7309AA","#CD0074","#00AF64","#BF8230","#F16D95","#A65000","#A65000","#AF66D5"],p=0,d=document.getElementById(e);if(d){d._chart&&d._chart.destroy(),d.getContext("2d");var m={};if(m.type=a,m.data=[],m.options={},m.data.labels=Array.isArray(t)?t:JSON.parse(t),m.data.datasets=[],Array.isArray(n))m.options=n;else if(""!=n&&null!=n)try{m.options=JSON.parse(n)}catch(a){m.options={},console.log(a)}else m.options={};switch(a){case"line":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.fill=!1,a.backgroundColor=l[o()],a.borderColor=a.backgroundColor,s(),r()});break}case"bar":case"horizontalBar":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.backgroundColor=l[o()],a.borderColor=a.backgroundColor}),s(),r();break}case"doughnut":case"pie":case"polarArea":{var g=c(arguments);$.each(g,function(e){var a={};a=g[e],a.backgroundColor=[],a.borderColor=[],$.each(a.data,function(){a.backgroundColor.push(l[o()])}),a.borderColor=a.backgroundColor,m.data.datasets.push(a),p=0});break}default:}var u=new Chart(d,m);d._chart=u}},this.cronapi.chart.createDataset=function(e,a,t){var n={};return n.label=e?e:"",n.data=Array.isArray(a)?a:a?JSON.parse(a):[],n.options=Array.isArray(t)?t:JSON.parse(t),n},this.cronapi.social={},this.cronapi.social.gup=function(e,a){a||(a=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),o=n.exec(a);return null==o?null:o[1]},this.cronapi.social.login=function(e,a,t){var n;this.cronapi.screen.showLoading(),this.cronapi.logic.isNullOrEmpty(this.cronapi.screen.getHostapp())?(this.cronapi.screen.hide(),this.cronapi.screen.notify("error","HostApp is Required")):this.cronapi.util.getURLFromOthers("POST","application/x-www-form-urlencoded",this.cronapi.screen.getHostapp()+""+"auth",this.cronapi.object.createObjectFromString(["{ \"username\": \"",e,"\" , \"password\": \"",a,"\" } "].join("")),this.cronapi.object.createObjectFromString(["{ \"X-AUTH-TOKEN\": \"",t,"\" } "].join("")),function(e){n=e,this.cronapi.screen.hide(),this.cronapi.util.setLocalStorage("_u",this.cronapi.object.serializeObject(n)),this.cronapi.screen.changeView("#/app/logged/home",[])}.bind(this),function(e){n=e,"403"==this.cronapi.object.getProperty(n,"status")||"401"==this.cronapi.object.getProperty(n,"status")?this.cronapi.screen.notify("error",this.cronapi.i18n.translate("LoginViewInvalidpassword",[])):this.cronapi.screen.notify("error",this.cronapi.object.getProperty(n,"responseJSON.message")),this.cronapi.screen.hide()}.bind(this))},this.cronapi.social.sociaLogin=function(e,a){var t=this,n=window.hostApp+"signin/"+e+"/";if(window.cordova&&cordova.InAppBrowser){var o="";(!0===a||"true"===a)&&(o=",clearcache=yes");var r=cordova.InAppBrowser.open(n,"_blank","location=no"+o);r.addEventListener("loadstart",function(e){-1<e.url.indexOf("_ctk")&&(r.close(),t.cronapi.social.login.bind(t)("#OAUTH#","#OAUTH#",t.cronapi.social.gup("_ctk",e.url)))})}else window.location.href="signin/"+e+"/"},this.cronapi.screen.getSelectedRowsGrid=function(e){var a=[],t=$("[ng-model=\""+e+"\"]").children().data("kendoGrid");if(t){var n=t.select();n.each(function(){var e=t.dataItem(this);a.push(e)})}return a},this.cronapi.screen.back=function(){history.back()},this.cronapi.regex={},this.cronapi.regex.extractTextByRegex=function(e,a,t){if(this.cronapi.logic.isNull(e)||this.cronapi.logic.isNull(a))return[];let n=null;n=null!=t&&"-"!==t?new RegExp(a,t):new RegExp(a);let o,r=[],c=null;for(;(o=n.exec(e))&&!(null!=c&&c==o.index);){let e=[];for(i=1;i<o.length;i++)e.push(o[i]);c=o.index,r.push(e)}return r},this.cronapi.regex.validateTextWithRegex=function(e,a,t){return!(this.cronapi.logic.isNull(e)||this.cronapi.logic.isNull(a))&&(null!=t&&"-"!==t?new RegExp(a,t).test(e):new RegExp(a).test(e))},this.cronapi.calendar={},this.cronapi.calendar.getCalendarValue=async function(e){const a=await getCalendar(e);return a?a.value():(showErrorNotification("calendarElementNotPresent"),null)},this.cronapi.calendar.setCalendarValue=async function(e,a){const t=await getCalendar(e);t?t.value(a):showErrorNotification("calendarElementNotPresent")},this.cronapi.calendar.getCalendarMin=async function(e){const a=await getCalendar(e);return a?a.min():(showErrorNotification("calendarElementNotPresent"),null)},this.cronapi.calendar.setCalendarMin=async function(e,a){const t=await getCalendar(e);t?t.min(a):showErrorNotification("calendarElementNotPresent")},this.cronapi.calendar.getCalendarMax=async function(e){const a=await getCalendar(e);return a?a.max():(showErrorNotification("calendarElementNotPresent"),null)},this.cronapi.calendar.setCalendarMax=async function(e,a){const t=await getCalendar(e);t?t.max(a):showErrorNotification("calendarElementNotPresent")},this.cronapi.calendar.getCalendarSelectDates=async function(e){const a=await getCalendar(e);return a?a.selectDates():(showErrorNotification("calendarElementNotPresent"),null)},this.cronapi.calendar.setCalendarSelectDates=async function(e,a){const t=await getCalendar(e);t?t.selectDates(Array.isArray(a)?a:[a]):showErrorNotification("calendarElementNotPresent")},this.cronapi.calendar.navigateCalendarTo=async function(e,a,t){const n=await getCalendar(e);n?n.navigate(a,t):showErrorNotification("calendarElementNotPresent")},this.cronapi.chat={},this.cronapi.chat.chatUserObj=function(e,a,t){return{id:e,name:a,iconUrl:t}},this.cronapi.chat.chatAttachmentObj=function(e,a,t,n,o,r){return{contentType:"heroCard",content:{title:e,subtitle:a,text:t,images:[{url:n,alt:o}],buttons:Array.isArray(r)?r:[r]}}},this.cronapi.chat.chatSuggestedActionObj=function(e,a){return{title:e,value:a}},this.cronapi.chat.getChatUser=async function(e,a,t){getChat(e).then(e=>{if(e)a(e.getUser());else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),t(e)}})},this.cronapi.chat.postChatMessage=function(e,a,t,n){getChat(e).then(e=>{if(e)e.postMessage(a),t();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),n(e)}})},this.cronapi.chat.renderChatMessage=function(e,a,t,n,o){getChat(e).then(e=>{if(e)e.renderMessage({type:"text",text:a},t),n();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),o(e)}})},this.cronapi.chat.renderChatAttachments=function(e,a,t,n,o,r){getChat(e).then(e=>{if(e)e.renderAttachments({attachments:Array.isArray(t)?t:[t],attachmentLayout:n},a),o();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),r(e)}})},this.cronapi.chat.renderChatHtml=function(e,a,t,n,o,r){const c=function(e){let a=document.createElement("div");a.innerHTML=e;let t=a.getElementsByTagName("script"),n=t.length;for(;n--;)t[n].parentNode.removeChild(t[n]);return a.innerHTML},s=kendo.template(`
              <div class="#=styles.card# #=styles.cardRich#">
                  <div class="#=styles.cardBody#">
                    <div>
                    #=text#
                    </div>
                  </div>
              </div>`);kendo.chat.Templates.kendoChatHtmlTemplate||kendo.chat.registerTemplate("kendoChatHtmlTemplate",s);let l=[];if(Array.isArray(t))for(let e in t){let a={contentType:"kendoChatHtmlTemplate",content:{text:c(t[e])}};l.push(a)}else{let e={contentType:"kendoChatHtmlTemplate",content:{text:c(t)}};l.push(e)}getChat(e).then(e=>{if(e)e.renderAttachments({attachments:l,attachmentLayout:n},a),o();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),r(e)}})},this.cronapi.chat.renderChatSuggestedActions=function(e,a,t,n){getChat(e).then(e=>{if(e)e.renderSuggestedActions(Array.isArray(a)?a:[a]),t();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),n(e)}})},this.cronapi.chat.renderChatUserTypingIndicator=function(e,a,t,n){getChat(e).then(e=>{if(e)e.renderUserTypingIndicator(a),t();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),n(e)}})},this.cronapi.chat.clearChatUserTypingIndicator=function(e,a,t,n){getChat(e).then(e=>{if(e)e.clearUserTypingIndicator(a),t();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),n(e)}})},this.cronapi.chat.removeChatTypingIndicator=function(e,a,t){getChat(e).then(e=>{if(e)e.removeTypingIndicator(),a();else{let e=this.cronapi.$translate.instant("chatElementNotPresent");this.cronapi.$scope.Notification.error(e),t(e)}})}}.bind(window)();